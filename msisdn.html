<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Msisdn</title>
</head>
<body>

    <div id="dump"></div>

    <!--<script>
        var req = new XMLHttpRequest();
        req.open('GET', document.location, false);
        req.send(null);

        // associate array to store all values
        var data = new Object();

        // get all headers in one call and parse each item
        //var headers_request =

        var headers = req.getAllResponseHeaders().toLowerCase();
        var aHeaders = headers.split('\n')
        for (var i= 0; i < aHeaders.length; i++) {
            var thisItem = aHeaders[i];
            var key = thisItem.substring(0, thisItem.indexOf(':'));
            var value = thisItem.substring(thisItem.indexOf(':')+1);
            data[key] = value;
        }

        // get referer
        var referer = document.referrer;
        data["Referer"] = referer;

        // get useragent
        var useragent = navigator.userAgent;
        data["UserAgent"] = useragent;


        //extra code to display the values in html
        var display = "";
        for(var key in data) {
            if (key != "") display += "<b>" + key + "</b> : " + data[key] + "<br>";
        }

        display += "<br><br><br>";
        if(data.msisdn !== undefined && data.msisdn != null)
        {
            display += "MSISDN: " + data.msisdn + "<br>";
            display += "MSISDN: " + data['msisdn'];
        }else{
            display += "MSISDN: " + "NULL";
        }

        document.getElementById("dump").innerHTML =  display;

    </script>-->

    <script>
        var response = JSON.parse(httpGet('api.php').toLowerCase());
        console.log(response)

        var data = response.data;
        console.log(data)

        //extra code to display the values in html
        var display = "";
        for(var key in data) {
            if (key != "") display += "<b>" + key + "</b> : " + data[key] + "<br>";
        }

        display += "<br><br>";
        if(data.msisdn !== undefined && data.msisdn != null)
        {
            display += "MSISDN: " + data.msisdn + "<br>";
            display += "MSISDN: " + data['msisdn'];
        }else{
            display += "MSISDN: " + "NULL";
        }

        document.getElementById("dump").innerHTML =  display;

        function httpGet(theUrl)
        {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
            xmlHttp.send( null );
            return xmlHttp.responseText;
        }
    </script>
</body>
</html>
